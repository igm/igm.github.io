<!doctype html><html lang=en><head><meta charset=utf-8><link rel=stylesheet type=text/css media=screen href=//cdnjs.cloudflare.com/ajax/libs/fancybox/1.3.4/jquery.fancybox-1.3.4.css><link rel=stylesheet href=https://igormihalik.com/css/page.css><title>GO applications and Cloud Foundry</title></head><body><div class=content><h1>GO applications and Cloud Foundry</h1><script id=dsq-count-scr src=//igormihalik.disqus.com/count.js async></script><p>Cloud Foundry is one of many options to host your applications. It is a PaaS originally developed by VMware, now governed by Cloud Foundry Foundation. Not going much into details about where, how and what as those information is publicly available I&rsquo;ll focus here on how to host your GO applications on any Cloud Foundry installation including PCF or PWS.</p><p>There&rsquo;s a known and recommended way to push GO applications. It is based on using GO buildpack. Very briefly, the buildpack takes all of your source code and dependencies (managed by godep), builds the binary and creates a droplet that is then distributed to CF nodes. The alternative approach I want to describe here is based on building the binary locally and push the binary instead of the source code. I&rsquo;ll leave the discussion about the advantages or disadvantages of such approach to a reader as in my opinion it is a matter of preference and specific project requirements.</p><p>And the description continues: &ldquo;When you push an application, Cloud Foundry automatically detects which buildpack is required and installs it on the Droplet Execution Agent (DEA) where the application needs to run.".</p><p>In our case, we&rsquo;ll use a special buildpack, called &ldquo;noop buildpack&rdquo;. This buildpack (as its name suggests) does nothing. We don&rsquo;t need any special logic to introspect our application and find out what language it is written in or which runtime it requires, because we know it is going to be a Linux x64 binary.</p><p>I am sure a careful reader just realised that this is by no means GO specific. Any script can be executed there, for example a script to run a python http server for serving static pages (full example here):</p><p>The important part of the script is the &ldquo;cd app&rdquo;. During the staging process, all of your application artifacts that are pushed to Cloud Foundry are placed into the &ldquo;app&rdquo; directory as can be seen using &ldquo;cf files APP_NAME&rdquo; command:</p><p>Then create a ".profile.d/start.sh&rdquo; file with a content similar to this:</p><p>And push your application to CF using noop-buildpack:</p><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://blog.igormihalik.com",this.page.identifier="/post/go-applications-and-cloud-foundry/"};(function(){var a=document,b=a.createElement('script');b.src='//igormihalik.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div><script type=text/javascript src=//code.jquery.com/jquery-1.11.0.min.js></script><script type=text/javascript src=//code.jquery.com/jquery-migrate-1.2.1.min.js></script><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/fancybox/1.3.4/jquery.fancybox-1.3.4.pack.min.js></script><script type=text/javascript>$(function(a){var b=!1,c=!0,d='inside';a(b?'img':'img.fancybox').each(function(){var b=a(this),c=b.attr('title'),d=b.attr('data-big')||b.attr('src'),e=a('<a href="#" class="fancybox"></a>').attr('href',d).attr('title',c);b.wrap(e)}),c&&a('a.fancybox').attr('rel','fancyboxgallery'),a('a.fancybox').fancybox({titlePosition:d})}),$.noConflict()</script></body></html>